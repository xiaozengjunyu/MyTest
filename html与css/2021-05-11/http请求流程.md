# HTTP 请求流程

参考
>* [浏览器基础知识](https://github.com/daydaylee1227/Blog/blob/master/articles/%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9B%B8%E5%85%B3/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9.md)

## HTTP 请求流程的八个阶段
  * 构建请求
  * 查找缓存
  * 准备 IP 和端口
  * 等待 TCP 队列
  * 建立 TCP 连接
  * 发送 HTTP 请求
  * 服务器处理请求流程
  * 服务器返回请求和断开连接

## HTTP 请求流程的八个阶段
假设在浏览器地址栏输入百度网站的地址：https://www.baidu.com 那么接下来

### 1.构建请求  
首先，浏览器构建请求行信息，构建好后，浏览器准备发起网络请求
```
GET /index.html HTTP1.1
```
### 2.查找缓存
在真正发起网络请求前，浏览器会先访问本地缓存查询是否有要的文件，如果查询到本地缓存了该文件，会拦截请求并直接结束请求。

### 3.准备 IP 地址和端口
首先第一步浏览器会请求 DNS 返回一个 IP 地址，之后如果 URL 没有指定端口，那么 HTTP 协议默认 80 端口。
想了解 DNS 原理及解析过程的，可以看看这 [《DNS 原理及解析过程》](./dns原理及解析过程.md)。

### 4.等待 TCP 队列
根据浏览器来规定， Chrome有个机制同一个域名同时最多只能建立 6 个 TCP 连接，主要看同一域名下的请求数量，超出6个，多出来的要进入等待状态，如果当前请求数少于6个直接进入 TCP 连接。

### 5.建立 TCP 连接
排队结束就到了浏览器通过 TCP 与服务器连接。
一个完整的 TCP 连接生命周期包括：建立连接、传输数据、断开连接。

### 6.发送 HTTP 请求
浏览器向服务器发起请求生成[请求行](./http基础概念.md):请求方法、请求地址、协议及版本。

### 7.服务器端处理请求流程
